!function(){angular.module("acComponents.config",[]).value("acComponents.config",{debug:!0}).value("acConfig",{reportTypes:["quick","avalanche","snowpack","weather","incident"],minFilters:["avalanche","quick","snowpack","incident","weather"],dateFilters:["7-days","1-days","3-days","14-days","30-days"]}).constant("AC_API_ROOT_URL","http://avalanche-canada-min.elasticbeanstalk.com"),angular.module("acComponents.controllers",[]),angular.module("acComponents.directives",[]),angular.module("acComponents.filters",[]),angular.module("acComponents.services",[]),angular.module("acComponents",["acComponents.config","acComponents.controllers","acComponents.directives","acComponents.filters","acComponents.services","acComponents.templates","ngSanitize"]),angular.module("acComponents.controllers").controller("acMapModal",["$scope","$modalInstance","latlng","$timeout",function(e,a,t,n){e.params={latlng:t},e.save=function(){a.close(e.params.latlng)},a.opened.then(function(){n(function(){e.show=!0},0)})}]),angular.module("acComponents.directives").directive("acAllminIcon",function(){return{replace:!0,templateUrl:"allmin-icon.html",link:function(){}}}),angular.module("acComponents.directives").directive("acDangerIcon",function(){return{replace:!0,templateUrl:"danger-icon.html",link:function(){}}}),angular.module("acComponents.directives").directive("acDatetimePicker",function(){return function(){if(jQuery().datetimepicker){var e={format:"YYYY-MM-DD hh:mm A"};$(".min-form").first().find('[type="datetime"]').datetimepicker(e)}}}),angular.module("acComponents.directives").directive("acDrawer",function(){return{replace:!0,transclude:!0,scope:!0,templateUrl:"drawer.html",link:function(e,a,t){e.drawerPosition=t.acDrawerPosition}}}),angular.module("acComponents.directives").directive("acEnter",function(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.acEnter)}),a.preventDefault())})}}),angular.module("acComponents.directives").directive("acForecastMini",["AC_API_ROOT_URL",function(e){return{templateUrl:"forecast-mini.html",scope:{forecast:"=acForecast",dangerRating:"=dangerRating",disclaimer:"=disclaimer",sponsor:"=sponsor"},link:function(a,t){t.addClass("ac-forecast-mini"),a.apiUrl=e}}}]),angular.module("acComponents.directives").directive("acLoadingIndicator",function(){return{templateUrl:"loading-indicator.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acLocationSelect",["MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","$timeout",function(e,a,t){return{scope:{latlng:"="},link:function(n,i){function o(e){t(function(){n.latlng=[e.lat,e.lng]},0)}function r(e){c.setPopupContent("Position: "+e.toString().substr(6)+"<br/>(drag to relocate)"),c.openPopup()}function s(e){c=L.marker(e,{icon:L.mapbox.marker.icon({"marker-color":"f79118"}),draggable:!0}),c.bindPopup("Position: "+e.toString().substr(6)+"<br/>(drag to relocate)").addTo(l).openPopup(),c.on("dragend",function(){var e=c.getLatLng();r(e),o(e)})}var l,c;L.mapbox.accessToken=e,$("#minForm").on("shown.bs.modal",function(){l.invalidateSize()}),l=L.mapbox.map(i[0],a,{attributionControl:!1,scrollWheelZoom:!0}).on("click",function(e){c?c&&!l.hasLayer(c)&&(o(e.latlng),c.setLatLng(e.latlng).addTo(l).openPopup()):(o(e.latlng),s(e.latlng))}),l.setView([52.3,-120.74966],5);var d=n.$watch("latlng",function(e){var a;c&&0===e.length?l.removeLayer(c):!c&&e.length>0?(a=L.latLng(e[0],e[1]),s(a),l.panTo(a)):c&&e.length>0&&(a=L.latLng(e[0],e[1]),c.setLatLng(a),r(a),l.panTo(a))});n.$on("$destroy",function(){d()})}}}]),angular.module("acComponents.directives").directive("acMapboxMap",["$rootScope","$window","$location","$timeout","acBreakpoint","acObservation","acForecast","acSubmission","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","$stateParams",function(e,a,t,n,i,o,r,s,l,c,d){return{template:'<div id="map"></div>',replace:!0,scope:{region:"=acRegion",regions:"=acRegions",showRegions:"=acShowRegions",obs:"=acObs",ob:"=acOb",minFilters:"=acMinFilters",currentReport:"=acReport"},link:function(p,u,m){function g(){L.control.locate({locateOptions:{maxZoom:14},position:"bottomright"}).addTo(P),new L.Control.Zoom({position:"bottomright"}).addTo(P)}function v(e){return function(){u.height($(a).height()-Number(e)),P.invalidateSize()}}function f(e){var a=P.getZoom()<=6?60:80;return L.icon({iconUrl:e.iconUrl||r.getDangerIconUrl(e.regionId),iconSize:[a,a],labelAnchor:[6,0]})}function h(){O.regions=L.geoJson(p.regions,{style:function(){return A.region.default},onEachFeature:function(e,a){function t(){if(P.getZoom()<9){var e=S();P.fitBounds(a.getBounds(),{paddingBottomRight:e})}O.currentRegion=a,p.$apply(function(){p.region=a})}if(a.bindLabel(e.properties.name),a.on("click",t),a.on("mouseover",function(){a==O.currentRegion?a.setStyle(A.region.selectedhover):a.setStyle(A.region.hover)}),a.on("mouseout",function(){a==O.currentRegion?a.setStyle(A.region.selected):a.setStyle(A.region.default)}),e.properties.centroid){var n=L.latLng(e.properties.centroid[1],e.properties.centroid[0]),i=L.marker(n),o=f({regionId:e.id});i.setIcon(o);var r=1;i.setZIndexOffset(r),i.on("click",function(){t()}),O.dangerIcons.addLayer(i)}}}),y()}function b(){O.dangerIcons.eachLayer(function(e){var a=e.options.icon.options.iconUrl,t=f({iconUrl:a});e.setIcon(t)})}function y(){var e=P.getZoom();if(O.regions&&p.showRegions){var a=P.hasLayer(O.regions);6>e&&a?P.removeLayer(O.regions):e>=6&&!a?P.addLayer(O.regions):e>10&&a&&P.removeLayer(O.regions)}if(O.dangerIcons){var t=P.hasLayer(O.dangerIcons);P.getZoom()<6&&t?P.removeLayer(O.dangerIcons):P.getZoom()>=6&&!t&&P.addLayer(O.dangerIcons);var n=O.dangerIcons.getLayers()[0];if(n){var i=n.options.icon.options.iconSize[0];(e>6&&60===i||6>=e&&80===i)&&b()}}O.obs;var o=.2;if(O.currentRegion&&p.showRegions)if(9>=e)A.region.selected.fillOpacity=o,O.currentRegion.setStyle(A.region.selected);else if(e>9&&13>e){switch(e){case 10:o=.15;break;case 11:o=.1;break;case 12:o=.05}A.region.selected.fillOpacity=o,O.currentRegion.setStyle(A.region.selected)}else O.currentRegion.setStyle(A.region.default);k()}function w(e){return _.isUndefined(e)&&(e="quick"),A.reportType[e]}function k(){}function x(){if(N.clearLayers(),p.obs&&p.obs.length>0){var a=(new L.markerClusterGroup).addTo(N);p.obs.map(function(t){var n=L.mapbox.featureLayer({type:"Feature",geometry:{type:"Point",coordinates:[t.latlng[1],t.latlng[0]]},properties:{"marker-size":"small","marker-color":w(t.obtype),zIndexOffset:1e3}}).setFilter(function(){return-1!==_.indexOf(p.minFilters,t.obtype)?!0:!1});n.on("click",function(){e.requestInProgress=!0,s.getOne(t.subid).then(function(a){a.requested=t.obtype,p.currentReport=a,e.requestInProgress=!1})}),n.eachLayer(function(e){a.addLayer(e)})})}else N.clearLayers();y()}function C(e){return{type:"Point",coordinates:[e.lng,e.lat]}}function S(){switch(p.device.size){case"xs":return L.point([0,0]);case"sm":return L.point([350,0]);case"md":case"lg":return L.point([480,0]);default:return L.point([0,0])}}function T(){return S().divideBy(2)}function R(e,a){var t=P.latLngToLayerPoint(e);return P.layerPointToLatLng(t.subtract(a))}function M(){var e=T();return R(P.getCenter(),e)}function F(){if(p.showRegions){var e=O.regions.getLayers(),a=M(),t=_.find(e,function(e){return gju.pointInPolygon(C(a),e.feature.geometry)});t||(t=_.min(e,function(e){var t=L.latLng(e.feature.properties.centroid[1],e.feature.properties.centroid[0]);return t.distanceTo(a)})),t&&D(t)}}function D(e){O.currentRegion=e,p.region!==e&&n(function(){p.region=e},10),O.regions.eachLayer(function(a){a===e?a.setStyle(A.region.selected):a.setStyle(A.region.default)})}p.device={},p.showRegions=p.showRegions||!0;var O={dangerIcons:L.featureGroup()},A={region:{"default":{fillColor:"transparent",color:"transparent"},selected:{fillColor:"#489BDF"},hover:{color:"#B43A7E"},selectedhover:{fillColor:"#489BDF",color:"#B43A7E"}},reportType:{incident:"#F44336",quick:"#4CAF50",avalanche:"#03A9F4",snowpack:"#3F51B5",weather:"#FFC107"},clusterColor:"#607D8B"};L.mapbox.accessToken=l;var P=L.mapbox.map(u[0].id,c,{attributionControl:!1,center:[52.3,-120.74966],maxZoom:10,minZoom:4,zoom:6,zoomControl:!1}),N=L.layerGroup().addTo(P);if(g(),i.setBreakpoints({xs:480,sm:600,md:1025}),e.$on("breakpoint",function(e,a){p.device.size=a}),m.topOffset){var q=Number(m.topOffset),E=v(q);angular.element(document).ready(E),angular.element(a).bind("resize",E)}P.on("load",y),P.on("zoomend",y),p.$watch("region",function(e,a){O.regions&&e&&e!==a&&D(e)}),p.$watch("regions",function(e){e&&e.features&&h()}),p.$watch("showRegions",function(e,a){e!==a&&(!e&&P.hasLayer(O.regions)?(O.currentRegion&&(p.region=null,O.currentRegion.setStyle(A.region.default)),P.removeLayer(O.regions)):e&&!P.hasLayer(O.regions)&&(P.addLayer(O.regions),F()))}),p.$watch("obs",function(e){e&&x()}),p.$watch("minFilters",function(e){e&&x()},!0),p.$watch("currentReport",function(a){if(d.subid&&a&&a.latlng){N.clearLayers();var t=(new L.markerClusterGroup).addTo(N);a.obs.map(function(n){var i=L.mapbox.featureLayer({type:"Feature",geometry:{type:"Point",coordinates:[a.latlng[1],a.latlng[0]]},properties:{"marker-size":"small","marker-color":w(n.obtype),zIndexOffset:1e3}}).setFilter(function(){return-1!==_.indexOf(p.minFilters,n.obtype)?!0:!1});i.on("click",function(){e.requestInProgress=!0,s.getOne(a.subid).then(function(a){a.requested=n.obtype,p.currentReport=a,e.requestInProgress=!1})}),i.eachLayer(function(e){t.addLayer(e)})}),P.setView(a.latlng,10)}},!0),p.$watch("ob",function(a){a&&a.latlng&&(o.getOne(a.obid,"html").then(function(e){var i=L.marker(a.latlng,{icon:L.mapbox.marker.icon({"marker-size":"small","marker-color":"#09c"})}),o=P.getSize().y-100;i.bindPopup(e,{maxHeight:o,maxWidth:400,autoPanPaddingTopLeft:[0,30]}),i.on("popupclose",function(){P.removeLayer(i),n(function(){t.path("/")},0)}),i.setZIndexOffset(1e4),P.addLayer(i),i.togglePopup()}),o.getOne(a.obid,"json").then(function(a){e.ogTags=[{type:"title",value:a.title},{type:"image",value:a.thumbs[0]},{type:"description",value:a.comment}]}))})}}}]),angular.module("acComponents.directives").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(a,t,n){var i=e(n.fileModel),o=i.assign;t.bind("change",function(){a.$apply(function(){o(a,t[0].files)})})}}}]).directive("acMinReportForm",["$state","$q","$timeout","acBreakpoint","acQuickReportData","acAvalancheReportData","acIncidentReportData","acSnowpackReportData","acWeatherReportData","acFormUtils","acSubmission","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","store","$anchorScroll","$modal",function(e,a,t,n,i,o,r,s,l,c,d,p,u,m,g,v){return{templateUrl:"min-report-form.html",replace:!0,link:function(n){function p(e){return"quickReport"===e?i.isCompleted(n.report.obs.quickReport):n.report.obs[e].isCompleted()}function u(){n.report={title:"",datetime:moment().format("YYYY-MM-DD hh:mm A"),latlng:[],files:[],obs:{quickReport:{ridingConditions:angular.copy(i.ridingConditions),avalancheConditions:angular.copy(i.avalancheConditions),comment:null},avalancheReport:o,incidentReport:r,snowpackReport:s,weatherReport:l}}}function f(){t(function(){h(),u(),n.minsubmitting=!1,n.minerror=!1},0)}function h(){o.reset(),r.reset(),s.reset(),l.reset()}var b="http://www.avalanche.ca/fxresources/Submissions+Guidelines.pdf";u(),n.additionalFields={avalancheReport:{name:"Avalanche",text:"Share information about a single, notable avalanche or tell us about overall avalanche conditions by describing many avalanches in a general sense. Aspect, elevation, trigger, dimensions/size are key data."},snowpackReport:{name:"Snowpack",text:"Snowpack depth, layering, and bonding are key data. Test results are very useful."},weatherReport:{name:"Weather",text:"Key data includes information about current and accumulated precipitation, wind speed and direction, temperatures, and cloud cover."},incidentReport:{name:"Incident",text:'Sharing incidents can help us all learn. Describe close calls and accidents here. Be sensitive to the privacy of others. Before reporting serious accidents check our <a href="'+b+'" target="_blank">submission guidelines</a>.'}},n.atleastOneTabCompleted=!1,n.getTabExtraClasses=function(e){var a=p(e);return n.atleastOneTabCompleted=n.atleastOneTabCompleted||a,{completed:a}},n.scrollToTop=function(){g.yOffset=100,g("top")},n.resetForm=f,n.goBack=function(){f(),e.go("ac.map")},n.submitForm=function(){var e=_.cloneDeep(n.report);if(e.obs=_.reduce(n.report.obs,function(e,a,t){return"quickReport"===t?i.isCompleted(a)&&(e.quickReport=a):a.isCompleted()&&(e[t]=a.getDTO()),e},{}),0===_.keys(e.obs).length)return a.reject("incomplete-form");var t=m.get("token");return t?(n.minsubmitting=!0,d.submit(e,t).then(function(e){return!e.data||"error"in e.data?(n.minsubmitting=!1,n.minerror=!0,a.reject("error")):(n.minsubmitting=!1,n.report.subid=e.data.subid,n.report.shareUrl=e.data.obs[0].shareUrl,console.log("submission: "+e.data.subid),e)},function(e){return n.minsubmitting=!1,n.minerror=!0,n.minerrormsg=e,a.reject(e)})):a.reject("auth-error")},n.openMapModal=function(){var e=v.open({animation:!1,templateUrl:"min-map-modal.html",controller:"acMapModal",size:"lg",windowClass:"map-modal",resolve:{latlng:function(){return n.report.latlng}}});e.result.then(function(e){n.report.latlng=e})};var y=n.$watchCollection(function(){return[n.report.latlng,n.report.tempLatlng]},function(e,a){e&&(e[0]!==a[0]&&(n.report.tempLatlng=n.report.latlng.join(","),e[1]=n.report.tempLatlng,n.tempLatlngModified=!1),e[1]&&e[1]!==e[0].join(",")&&(n.tempLatlngModified=!0))});n.$on("$destroy",function(){y()}),n.saveLocation=function(){c.validateLocationString(n.report.tempLatlng)?(n.report.latlng=n.report.tempLatlng.split(","),n.tempLatlngModified=!1,n.invalidLatLng=!1):n.invalidLatLng=!0}}}}]),angular.module("acComponents.directives").directive("acMinReportModal",function(){return{templateUrl:"min-report-modal.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acObservationMin",["acReportData","acConfig","$stateParams","$state",function(e,a,t,n){return{templateUrl:"min-observation-drawer.html",scope:{sub:"=observation",sponsor:"=sponsor"},link:function(i,o){function r(e){if(i.sub){var a=_.reduce(i.sub.obs,function(e,a){return e.push(a.obtype),e},[]);return-1!==_.indexOf(a,e)?"completed":"disabled"}}function s(){i.sub=null,t.subid&&n.go("ac.map")}function l(e){return"disabled"===r(e)?!1:(i.sub.requested=e,c(i.sub),void 0)}function c(a){a.requested=d(a);var t=_.filter(a.obs,function(e){return a.requested===e.obtype});return"quick"===a.requested?(t=_.filter(a.obs,function(e){return a.requested===e.obtype}),i.activeTab=p(t[0].ob),void 0):(t[0].ob&&(i.activeTab=e[a.requested].mapDisplayResponse(t[0].ob)),void 0)}function d(e){if(e.requested)return e.requested;var a=null;return _.forEach(i.reportTypes,function(t){return _.some(e.obs,{obtype:t})?(a=t,!1):void 0}),a}function p(e){var a=[];return e.avalancheConditions&&u(e.avalancheConditions).length>0&&a.push({prompt:"Avalanche conditions",type:"checkbox",order:2,value:u(e.avalancheConditions)}),_.forEach(e.ridingConditions,function(e){if("single"===e.type&&e.selected&&e.selected&&a.push({prompt:e.prompt,type:"radio",order:1,value:e.selected}),"multiple"===e.type&&e.options){var t=_.reduce(e.options,function(e,a,t){return a&&e.push(t),e},[]);_.isEmpty(t)||a.push({prompt:e.prompt,type:"checkbox",order:1,value:t})}}),a}function u(e){var a=[];return e.slab&&a.push("Slab avalanches today or yesterday."),e.sound&&a.push("Whumphing or drum-like sounds or shooting cracks."),e.snow&&a.push("30cm + of new snow, or significant drifitng, or rain in the last 48 hours."),e.temp&&a.push("Rapid temperature rise to near zero degrees or wet surface snow."),a}o.addClass("ac-observation-drawer"),i.activeTab={},i.reportTypes=a.reportTypes,i.hasReport=r,i.changeTab=l,i.closeDrawer=s,i.$watch("sub",function(e){e&&e.latlng&&c(e)})}}}]).filter("dateformat",function(){return function(e){var a=moment(e),t=moment.parseZone(e).zone(),n={480:"P",420:"M",360:"C",300:"E",240:"A",180:"N"},i=a.isDST()?"DT":"ST",o="UTC";return t in n&&(o=n[t]+i,a.subtract(t,"minutes")),a.format("MMM Do, YYYY [at] HH:mm ["+o+"]")}}),angular.module("acComponents.directives").directive("acSocialShare",function(){return{templateUrl:"social-share.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acSubmissionFormValidator",function(){return{require:"^form",link:function(e,a,t,n){function i(e,a){angular.isDefined(n[e])&&n[e].$setValidity(e,a)}e.validate=function(e,a){a.validate()?i(e,!0):i(e,!1)},e.$watch("atleastOneTabCompleted",function(e){angular.isDefined(e)&&n.$setValidity("atleastOneTab",e)})}}}),angular.module("acComponents.directives").directive("acTabStyle",function(){return{link:function(e,a,t){function n(e){var t=JSON.parse(e);_.forEach(t,function(e,t){e?a.removeClass(t).addClass(t):a.removeClass(t)})}t.$observe("acTabStyle",n)}}}),angular.module("acComponents.filters").filter("acNormalizeForecastTitle",function(){return function(e){return e?e.replace(/^Avalanche (Forecast|Bulletin) - /g,""):void 0}}),angular.module("acComponents.filters").filter("dateUtc",function(){return function(e,a){return e?moment.utc(e).format(a):void 0}}),angular.module("acComponents.services").factory("acAvalancheReportData",["acFormUtils",function(e){var a={avalancheOccurrenceEpoch:{prompt:"Avalanche Observation Datetime",type:"datetime",value:null,order:1},avalancheNumber:{prompt:"Number of avalanches in this report",type:"radio",inline:!0,options:["1","2-5","6-10","11-50","51-100"],value:null,order:2},avalancheSize:{prompt:"Avalanche Size",type:"radio",inline:!0,value:null,options:["1","1.5","2","2.5","3","3.5","4","4.5","5"],helpText:"Use Canadian size classification. Size 1 is relatively harmless to people. Size 2 can bury, injure or kill a person. Size 3 can bury and destroy a car. Size 4 can destroy a railway car. Size 5 can destroy 40 hectares of forest.",order:3},slabThickness:{type:"number",prompt:"Slab Thickness (centimetres)",value:null,options:{min:10,max:500},errorMessage:"Number between 10 and 500 please.",order:4},slabWidth:{type:"number",prompt:"Slab Width (meters)",value:null,options:{min:1,max:3e3},errorMessage:"Number between 1 and 3000 please.",order:5},runLength:{type:"number",prompt:"Run length (meters)",options:{min:1,max:1e4},value:null,errorMessage:"Number between 1 and 10000 please.",helpText:"Length from crown to toe of debris.",order:6},avalancheCharacter:{type:"checkbox",prompt:"Avalanche Character",limit:3,inline:!0,options:{"Loose wet":!1,"Loose dry":!1,"Storm slab":!1,"Persistent slab":!1,"Deep persistent slab":!1,"Wet slab":!1,"Cornice only":!1,"Cornice with slab":!1},order:7,errorMessage:"Please check maximum 3 options."},triggerType:{type:"dropdown",prompt:"Trigger Type",options:["Natural","Skier","Snowmobile","Other Vehicle","Helicopter","Explosives"],value:null,order:8},triggerSubtype:{type:"dropdown",prompt:"Trigger Subtype",value:null,options:["Accidental","Intentional","Remote"],helpText:"A remote trigger is when the avalanche starts some distance away from where the trigger was  applied.",order:9},triggerDistance:{type:"number",prompt:"Remote Trigger Distance (metres)",options:{min:0,max:2e3},helpText:"If a remote trigger, enter how far from the trigger point is the nearest part of the crown.",value:null,errorMessage:"Number between 0 and 2000 please.",order:10},startZoneAspect:{type:"radio",inline:!0,prompt:"Start Zone Aspect",options:["N","NE","E","SE","S","SW","W","NW"],value:null,order:11},startZoneElevationBand:{prompt:"Start Zone Elevation Band",type:"radio",inline:!0,options:["Alpine","Treeline","Below Treeline"],value:null,order:12},startZoneElevation:{type:"number",prompt:"Start Zone Elevation (metres above sea level)",options:{min:0,max:5e3},value:null,errorMessage:"Number between 0 and 5000 please.",order:13},startZoneIncline:{type:"number",prompt:"Start Zone Incline",options:{min:0,max:90},value:null,errorMessage:"Number between 0 and 90 please.",order:14},runoutZoneElevation:{type:"number",prompt:"Runout Zone Elevation (metres above sea level)",options:{min:0,max:5e3},helpText:"The lowest point of the debris.",value:null,errorMessage:"Number between 0 and 5000 please.",order:15},weakLayerBurialDate:{prompt:"Weak Layer Burial Date",type:"datetime",helpText:"Date the weak layer was buried.",order:16},weakLayerCrystalType:{type:"checkbox",prompt:"Weak Layer Crystal Type",limit:2,inline:!0,options:{"Surface hoar":!1,Facets:!1,"Surface hoar and facets":!1,"Depth hoar":!1,"Storm snow":!1},order:17,errorMessage:"Please check maximum 2 options."},crustNearWeakLayer:{prompt:"Crust Near Weak Layer",type:"radio",inline:!0,options:["Yes","No"],value:null,order:18},windExposure:{type:"dropdown",prompt:"Wind Exposure",options:["Lee slope","Windward slope","Down flow","Cross-loaded slope","Reverse-loaded slope","No wind exposure"],value:null,order:19},vegetationCover:{type:"dropdown",prompt:"Vegetation cover",value:null,options:["Open slope","Sparse trees or gladed slope","Dense trees"],order:20},avalancheObsComment:{prompt:"Avalanche Observation Comment",type:"textarea",value:null,helpText:"Please add additional information, for example terrain, aspect, elevation etc. especially if describing many avalanches together.",order:21}};return e.buildReport(a)}]),angular.module("acComponents.services").factory("acBreakpoint",["$rootScope","$timeout","$window",function(e,a,t){return{setBreakpoints:function(n){function i(){var i,r=$(t).width();i=r<n.xs?"xs":r>=n.xs&&r<n.sm?"sm":r>=n.sm&&r<n.md?"md":"lg",o&&i===o||(o=i,a(function(){e.$broadcast("breakpoint",o)},0))}var o;i(),angular.element(t).bind("resize",i)}}}]),angular.module("acComponents.services").factory("acForecast",["$http","$q","acImageCache","AC_API_ROOT_URL",function(e,a,t,n){var i,o=n;return{fetch:function(){var t=a.defer();return i?t.resolve(i):e.get(o+"/api/forecasts").then(function(e){i=e.data,t.resolve(i)}),t.promise},getOne:function(t){return a.when(this.fetch()).then(function(){var a=_.find(i.features,{id:t});return e.get(o+a.properties.forecastUrl).then(function(e){return e.data})})},getDangerIconUrl:function(e){var a=_.find(i.features,{id:e});return n+a.properties.dangerIconUrl}}}]),angular.module("acComponents.services").factory("acFormUtils",function(){function e(e){function a(e){return n[e.type]}function t(){return _.reduce(e,function(e,a,t){return e[t]=a.getDTO(),e},{})}function i(){return _.reduce(e,function(e,a,t){var n=a.validate();return n&&e[t].push(n),e})}function o(){_.invoke(e,"reset")}function r(){var a=_.reduce(e,function(e,a){return e+=a.isCompleted()?1:0},0);return a>0}function s(a){if(!_.isEmpty(a)){var t=_.reduce(a,function(a,t,n){return _.isUndefined(a[n])&&t&&(a[n]={}),t&&!_.isEmpty(l(t))&&(a[n]=e[n]?e[n].getDisplayObject():{},a[n].value=l(t)),a},{});return _.sortBy(_.values(t),"order")}}function l(e){return _.isPlainObject(e)?_.reduce(e,function(e,a,t){return a&&e.push(t),e},[]):e}if(!angular.isDefined(e))throw new Error("Please provide fields");return _.forEach(e,function(e){_.assign(e,a(e))}),{fields:e,getDTO:t,validate:i,reset:o,isCompleted:r,mapDisplayResponse:s}}function a(e){try{if(-1===e.indexOf(","))return!1;var a=e.split(",");if(2!==a.length)return!1;var t=L.latLng(a[0],a[1]);return angular.isNumber(t.lat)&&angular.isNumber(t.lng)}catch(n){return!1}}var t={getDTO:function(){return this.value},validate:function(){return!0},reset:function(){this.value=null},isCompleted:function(){return!_.isEmpty(this.value)},getDisplayObject:function(){return{prompt:this.prompt,order:this.order?this.order:50,type:this.type}}},n={checkbox:{getDTO:function(){return this.options},validate:function(){if(angular.isDefined(this.limit)){var e=this.getNumberSelected();return e<=this.limit}return!0},reset:function(){var e=this.options;_.forEach(this.options,function(a,t){e[t]=!1})},isCompleted:function(){var e=this.getNumberSelected();return e>0},getNumberSelected:function(){return _.reduce(this.options,function(e,a){return a&&e++,e},0)},getDisplayObject:t.getDisplayObject},number:{getDTO:function(){return this.value},validate:function(){return null==this.value||parseInt(this.value)>=this.options.min&&parseInt(this.value)<=this.options.max},reset:t.reset,isCompleted:t.isCompleted,getDisplayObject:t.getDisplayObject},dropdown:t,textarea:t,radio:t,datetime:t};return{buildReport:e,validateLocationString:a}}),angular.module("acComponents.services").factory("acImageCache",["$http",function(e){return{cache:function(a){a.forEach(function(a){e.get(a)})}}}]),angular.module("acComponents.services").service("acIncidentReportData",["acFormUtils",function(e){var a={groupActivity:{type:"checkbox",prompt:"Activity:",options:{Snowmobiling:!1,Skiing:!1,"Climbing/Mountaineering":!1,"Hiking/Scrambling":!1,Snowshoeing:!1,Tobogganing:!1,Other:!1},inline:!0,helpText:"If other, please describe in Incident Description.",order:1},groupSize:{type:"number",prompt:"Number of people in the group:",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:2},numberFullyBuried:{type:"number",prompt:"Number of people fully buried:",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:3},numberPartlyBuriedImpairedBreathing:{type:"number",prompt:"Number of people partly buried, breathing impaired:",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:4},numberPartlyBuriedAbleBreathing:{type:"number",prompt:"Number of people partly buried, able to breathe normally:",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:5},numberCaughtOnly:{type:"number",prompt:"Number of people caught and not buried:",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:6},numberPeopleInjured:{type:"number",prompt:"Number of people caught only and not fully or partly buried:",options:{min:0,max:400},value:null,errorMessage:"Number between 0 and 400 please.",order:7},terrainShapeTriggerPoint:{type:"radio",inline:!0,prompt:"Terrain shape at Trigger Point:",options:["Convex","Planar","Concave","Unsupported"],value:null,helpText:"Convex: a roll. Concave: bowl-shaped. Planar: smooth with no significant convexities or concavities. Unsupported: a slope that drops off abruptly at the bottom.",order:8},snowDepthTriggerPoint:{type:"radio",inline:!0,prompt:"Snow depth at Trigger Point:",options:["Shallow","Deep","Average","Variable"],helpText:"The depth of the snowpack compared to the average conditions in the area. Shallow: shallower than average. Deep: deeper than average. Average: about the same as everywhere else. Variable: depth varies significantly in the place where the avalanche started.",value:null,order:9},terrainTrap:{type:"checkbox",prompt:"Terrain Trap:",options:{"No obvious terrain trap":!1,"Gully or depression":!1,"Slope transition or bench":!1,Trees:!1,Cliff:!1},inline:!0,helpText:"Terrain traps are features that increase the consequences of an avalanche.",order:10},incidentDescription:{prompt:"Incident Description:",type:"textarea",value:null,helpText:"No names and no judging please.",guidelines:"http://www.avalanche.ca/fxresources/Submissions+Guidelines.pdf",order:11}};return e.buildReport(a)}]),angular.module("acComponents.services").factory("acObservation",["$http","AC_API_ROOT_URL",function(e,a){var t=a+"/api/min/observations";return{byPeriod:function(a){var n={params:{last:a||"2:days",client:"web"}};return e.get(t,n).then(function(e){return e.data})},getOne:function(a,n){var n="."+n||"",i=t+"/"+a+n;return e.get(i).then(function(e){return e.data})}}}]),angular.module("acComponents.services").service("acQuickReportData",function(){this.avalancheConditions={slab:!1,sound:!1,snow:!1,temp:!1},this.ridingConditions={ridingQuality:{prompt:"Riding quality was:",type:"single",options:["Amazing","Good","OK","Terrible"],selected:null},snowConditions:{type:"multiple",prompt:"Snow conditions were:",options:{Crusty:!1,Powder:!1,"Deep powder":!1,Wet:!1,Heavy:!1,"Wind affected":!1,Hard:!1}},rideType:{type:"multiple",prompt:"We rode:",options:{"Mellow slopes":!1,"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Dense trees":!1,"Alpine slopes":!1}},stayedAway:{type:"multiple",prompt:"We stayed away from:",options:{"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Alpine slopes":!1}},weather:{type:"multiple",prompt:"The day was:",options:{Stormy:!1,Windy:!1,Sunny:!1,Cold:!1,Warm:!1,Cloudy:!1,Foggy:!1,Wet:!1}}},this.isCompleted=function(e){function a(e){return _.reduce(e,function(e,a){return e+a?1:0},0)}var t=a(e.avalancheConditions),n=_.reduce(e.ridingConditions,function(e,t){if("single"!==t.type||_.isEmpty(t.selected)){if("multiple"===t.type){var n=a(t.options);n>0&&e++}}else e++;return e},0),i=_.isEmpty(e.comment)?0:1;return t+n+i>0}}),angular.module("acComponents.services").factory("acReportData",["acQuickReportData","acAvalancheReportData","acSnowpackReportData","acWeatherReportData","acIncidentReportData",function(e,a,t,n,i){return{quick:e,avalanche:a,snowpack:t,weather:n,incident:i}}]),angular.module("acComponents.services").factory("acSnowpackReportData",["acFormUtils",function(e){var a={snowpackObsType:{type:"radio",prompt:"Is this a point observation or a summary of your day?",options:["Point Observation","Summary"],inline:!0,value:null,helpText:"Please add additional information about the snowpack, especially notes about weak layer, how the snow varied by aspect/elevation, and details of any slope testing performed.",order:1},snowpackSiteElevation:{type:"number",prompt:"Snowpack Site Elevation (metres above sea level)",options:{min:0,max:4e3},value:null,errorMessage:"Number between 0 and 4000 please.",order:2},snowpackSiteElevationBand:{type:"radio",prompt:"Snowpack Site Elevation Band",options:["Alpine","Treeline","Below Treeline"],inline:!0,value:null,order:3},snowpackSiteAspect:{type:"radio",prompt:"Snowpack Site Aspect",options:["N","NE","E","SE","S","SW","W","NW"],value:null,inline:!0,order:4},snowpackDepth:{type:"number",prompt:"Snowpack Depth (centimetres)",options:{min:0,max:1e4},helpText:"Total height of snow in centimetres. Averaged if this is a summary.",value:null,errorMessage:"Number between 0 and 10000 please.",order:5},snowpackWhumpfingObserved:{type:"radio",prompt:"Did you observe whumpfing?",options:["Yes","No"],inline:!0,value:null,helpText:"A whumpf is a rapid settlement of the snowpack caused by the collapse of a weak layer. It is accompanied by an audible noise.",order:6},snowpackCrackingObserved:{type:"radio",prompt:"Did you observe cracking?",options:["Yes","No"],inline:!0,value:null,helpText:"Cracking is shooting cracks radiating more than a couple of metres from your sled or skis.",order:7},snowpackSurfaceCondition:{type:"checkbox",prompt:"Surface condition",options:{"New Snow":!1,Crust:!1,"Surface Hoar":!1,Facets:!1,Corn:!1,Variable:!1},inline:!0,order:8},snowpackFootPenetration:{type:"number",prompt:"Foot Penetration (centimeters)",options:{min:0,max:200},helpText:"How far you sink into the snow when standing on one fully-weighted foot.",value:null,errorMessage:"Number between 0 and 200 please.",order:9},snowpackSkiPenetration:{type:"number",prompt:"Ski Penetration (centimeters)",options:{min:0,max:200},helpText:"How far  you sink into the snow when standing on one fully-weighted ski.",value:null,errorMessage:"Number between 0 and 200 please.",order:10},snowpackSledPenetration:{type:"number",prompt:"Sled Penetration (centimeters)",options:{min:0,max:200},helpText:"The depth a sled sinks into the snow after stopping slowly on level terrain.",value:null,errorMessage:"Number between 0 and 200 please.",order:11},snowpackTestInitiation:{type:"radio",prompt:"Snowpack Test Result",options:["None","Very Easy","Easy","Moderate","Hard"],helpText:"Average if you did a number of tests.",value:null,inline:!0,order:12},snowpackTestFracture:{type:"radio",prompt:"Snowpack Test Fracture Character",options:['Sudden ("Pop" or "Drop")',"Resistant","Uneven break"],helpText:"Average if you did a number of tests. Describe further in comments if variable results.",value:null,inline:!0,order:13},snowpackTestFailure:{type:"number",prompt:"Snowpack Test Failure Depth",options:{min:0,max:200},helpText:"Depth below the surface that failure occurred.",value:null,errorMessage:"Number between 0 and 200 please.",order:14},snowpackObsComment:{type:"textarea",prompt:"Snowpack Observation Comment",value:null,order:15}};
return e.buildReport(a)}]),angular.module("acComponents.services").factory("acSubmission",["$q","$http","AC_API_ROOT_URL",function(e,a,t){function n(e){return e.size<s&&-1!==l.indexOf(e.type)}function i(e){return _.reduce(e,function(e,a){return e&&n(a)},!0)}function o(a){var t=e.defer();if(i(a.files)){var n=_.reduce(a,function(e,a,t){return"files"===t?_.forEach(a,function(a,t){e.append("file"+t,a,a.name)}):_.isPlainObject(a)||_.isArray(a)?e.append(t,JSON.stringify(a)):"datetime"===t?e.append(t,moment(a,"YYYY-MM-DD hh:mm A").format()):_.isString(a)&&e.append(t,a),e},new FormData);t.resolve(n)}else t.reject(c);return t.promise}var r=t+"/api/min/submissions",s=25e6,l=["image/png","image/jpeg"],c="Invalid file! Files have to be smaller than 25 MB and of type: "+l.join(", ");return{submit:function(e,t){return o(e).then(function(e){return a.post(r,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+t}})})},byPeriod:function(e){var t={params:{period:e||"2:days"}};return a.get(r,t).then(function(e){return e.data})},getOne:function(e,t){var n={params:{client:"web"}},i=r+"/"+e;return a.get(i,n).then(function(e){return e.data})}}}]),angular.module("acComponents.services").factory("acWeatherReportData",["acFormUtils",function(e){var a={skyCondition:{type:"checkbox",prompt:"Cloud Cover:",options:{Clear:!1,"Few clouds (<2/8)":!1,"Scattered clouds (2/8-4/8)":!1,"Broken clouds (5/8-7/8)":!1,"Overcast (8/8)":!1,Fog:!1},inline:!0,helpText:"Values expressed in eighths refer to the proportion of the sky that was covered with clouds. E.g. 2/8 refers to a sky approximately one quarter covered with cloud.",order:1},precipitationType:{type:"radio",prompt:"Precipitation Type:",options:["Snow","Rain","None"],value:null,inline:!0,order:2},snowfallRate:{type:"number",prompt:"Snowfall Rate (cm/hour):",options:{min:1,max:20},value:null,helpText:"If there was no snow, please leave this field blank.",errorMessage:"Number between 1 and 20 please.",order:3},rainfallRate:{type:"radio",prompt:"Rainfall rate:",options:["Drizzle","Showers","Raining","Pouring"],value:null,inline:!0,helpText:"If there was no rain, please leave this field blank.",order:4},temperature:{type:"number",prompt:"Temperature at time of observation (deg C):",options:{min:-50,max:40},value:null,errorMessage:"Number between -50 and 40 please.",order:5},minTemp:{type:"number",prompt:"Minimum temperature in last 24 hours (deg C)",options:{min:-50,max:30},value:null,errorMessage:"Number between -50 and 30 please.",order:6},maxTemp:{type:"number",prompt:"Maximum temperature in last 24 hours (deg C):",options:{min:-40,max:40},value:null,errorMessage:"Number between -40 and 40 please.",order:7},temperatureTrend:{type:"radio",prompt:"Temperature Trend:",options:["Falling","Steady","Rising"],value:null,inline:!0,helpText:"Describe how the temperature changed in the last 3 hours.",order:8},newSnow24Hours:{type:"number",prompt:"Amount of new snow in last 24 hours (centimetres):",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:9},precipitation24Hours:{type:"number",prompt:"Total rain and snow combined in last 24 hours (millimetres):",options:{min:0,max:100},value:null,errorMessage:"Number between 0 and 100 please.",order:10},stormSnowAmount:{type:"number",prompt:"Total snow from the most recent storm (cm):",options:{min:0,max:300},value:null,helpText:"Please enter the amount of snow that has fallen during the current storm cycle. You can specify a storm start date to describe the time period over which this snow fell.",errorMessage:"Number between 0 and 300 please.",order:11},stormStartDate:{type:"datetime",prompt:"Storm Start Date",value:null,helpText:"The date on which the most recent storm started. Leave blank if there has not been a recent storm.",order:12},windSpeed:{type:"dropdown",prompt:"Wind Speed",options:["Calm","Light (1-25 km/h)","Moderate (26-40 km/h)","Strong (41-60 km/h)","Extreme (>60 km/h)"],value:null,helpText:"Calm: smoke rises. Light: flags and twigs move. Moderate: snow begins to drift. Strong: whole tress in motion. Extreme: difficulty walking.",order:13},windDirection:{type:"radio",prompt:"Wind Direction",options:["N","NE","E","SE","S","SW","W","NW"],inline:!0,value:null,order:14},blowingSnow:{type:"radio",prompt:"Blowing Snow",options:["None","Light","Moderate","Intense"],inline:!0,helpText:"How much snow is blowing at ridge crest elevation. Light: localized snow drifting. Moderate: a plume of snow is visible. Intense: a large plume moving snow well down the slope.",order:15},weatherObsComment:{type:"textarea",prompt:"Weather Observation Comment",value:null,order:16}};return e.buildReport(a)}]),angular.module("acComponents.templates",[]).run(["$templateCache",function(e){e.put("allmin-icon.html",'<svg width="28px" height="28px" viewbox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>all_min</title><g id="Styleguide" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="02_01_Second-proposal-#2" sketch:type="MSArtboardGroup" transform="translate(-30.000000, -101.000000)" stroke="#FFFFFF"><g id="all_min" sketch:type="MSLayerGroup" transform="translate(31.000000, 102.000000)"><circle id="Oval-6" fill="#FFFFFF" sketch:type="MSShapeGroup" cx="13" cy="13" r="13"></circle><path id="Oval-5" d="M20.6424365,23.5174622 C18.4973383,25.078868 15.8562401,26 13,26 C10.1408573,26 7.49729401,25.0769949 5.35102528,23.5126999 C5.35616485,23.5157039 5.35879172,23.5172209 5.35879172,23.5172209 L12.9999995,13 L20.6412083,23.5172209 C20.6412083,23.5172209 20.6416198,23.5173052 20.6424365,23.5174622 Z" fill="#F44336" sketch:type="MSShapeGroup"></path><path id="Oval-1" d="M13,0 C7.1843333,0 2.26060446,3.81883989 0.599648246,9.08568486 C0.623290506,9.01855468 0.636265288,8.98277907 0.636265288,8.98277907 L12.9999995,13 L13,0 Z" fill="#03A9F4" sketch:type="MSShapeGroup"></path><path id="Oval-1" d="M13,0 C18.8156667,0 23.7393955,3.81883989 25.4003518,9.08568486 C25.3767095,9.01855468 25.3637347,8.98277907 25.3637347,8.98277907 L13.0000005,13 L13,0 Z" fill="#3F51B5" sketch:type="MSShapeGroup"></path><path id="Oval-3" d="M7.63867216,23.5467443 C10.8878189,21.1834812 13.0000005,17.3516752 13.0000005,13.0265428 C13.0000005,11.6211191 12.7769788,10.2677848 12.3643955,9 L12.3637352,9.00932187 L0,13.0265428 L7.64120875,23.5437637 C7.64120875,23.5437637 7.64035873,23.5447686 7.63867216,23.5467443 Z" fill="#4CAF50" sketch:type="MSShapeGroup" transform="translate(6.500000, 16.273372) scale(-1, 1) translate(-6.500000, -16.273372) "></path><path id="Oval-3" d="M20.6386717,23.5202015 C23.8878184,21.1569384 26,17.3251324 26,13 C26,11.5945763 25.7769784,10.241242 25.364395,8.97345721 L25.3637347,8.98277907 L12.9999995,13 L20.6412083,23.5172209 C20.6412083,23.5172209 20.6403583,23.5182258 20.6386717,23.5202015 Z" fill="#FFC107" sketch:type="MSShapeGroup"></path></g></g></g></svg>'),e.put("danger-icon.html",'<div class="danger-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="398.5 12.1 555 560" enable-background="new 398.5 12.1 555 560" xml:space="preserve"><polygon id="alp" points="747.7,218.1 623.1,197.6 678.8,109.8"></polygon><polygon id="tln" points="794.2,291 542.8,323.6 616.7,207.4 755.5,230.3"></polygon><polygon id="btl" points="858.3,391.8 499.4,391.8 535.1,335.5 800.6,301.1"></polygon></svg><span>FORECAST</span></div>'),e.put("drawer.html",'<div class="ac-drawer"><a ng-click="drawer.right.visible = false" ng-if="drawerPosition === \'right\'" class="ac-drawer-close visible-xs"><i class="fa fa-close fa-lg"></i></a><div class="ac-drawer-tools"><ul><li ng-if="drawerPosition === \'right\'" ng-click="toggleForecast()" ng-class="{on: drawer.right.visible &amp;&amp; drawer.right.enabled}" style="margin-bottom: 50px;"><div ac-danger-icon="ac-danger-icon" style="height: 60px; width:60px;"></div></li><li ng-if="drawerPosition === \'left\'" ng-click="goToSubmitReport()" class="ac-submit-report-tab on"><i class="fa fa-plus fa-2x"></i><i class="fa fa-tasks fa-inverse fa-2x"></i><span>New report</span></li><li ng-if="drawerPosition === \'left\'" class="ac-filters ac-min-filters"><ul ng-init="expandedMin = false" ng-class="{opened: expandedMin}" class="list-inline"><li ng-click="expandedMin = !expandedMin" class="ac-minfilter-button"><i class="fa fa-map-marker fa-inverse fa-2x"></i><span>MIN Filter</span></li><li ng-repeat="minFilter in minFilters" ng-if="expandedMin" ng-click="toggleFilter(\'minFilter:\'+ minFilter)" ng-class="{on: getMinFilters(minFilter)}"><div ac-allmin-icon="ac-allmin-icon" ng-if="minFilter === \'all min\'" class="report-allmin"></div><i ng-class="\'report-\'+ minFilter" ng-if="minFilter !== \'all min\'" class="fa fa-map-marker fa-inverse fa-2x"></i><span>{{ minFilter }}</span></li></ul></li><li ng-if="drawerPosition === \'left\'" class="ac-filters ac-date-filters"><ul ng-class="{opened: expandedDate}" class="list-inline"><li ng-click="toggleDateFilters()" class="on"><i class="fa fa-calendar fa-inverse fa-2x"></i><span>{{ filters.obsPeriod }}</span></li><li ng-repeat="dateFilter in dateFilters" ng-if="expandedDate" ng-click="toggleFilter(\'obsPeriod:\'+dateFilter);" ng-class="{hidden: filters.obsPeriod === dateFilter}"><i class="fa fa-calendar fa-inverse fa-2x"></i><span>{{ dateFilter }}</span></li></ul></li></ul></div><div ng-transclude="ng-transclude" class="ac-drawer-body"></div></div>'),e.put("forecast-mini.html",'<div class="panel"><div ng-show="forecast.externalUrl" style="min-height: 500px;" class="panel-body"><div class="row"><div class="col-xs-12"><h3 class="ac-forecast-region">{{ forecast.name }}</h3></div></div><div class="row"><div class="col-xs-12"><p>Avalanche information for this region is available &nbsp;<a ng-href="{{forecast.externalUrl}}" target="_blank"><i class="fa fa-external-link">here.</i></a></p></div></div></div><div ng-show="forecast.parksUrl" style="min-height: 500px;" class="panel-body"><div class="row"><div class="col-xs-12"><h3 class="ac-forecast-region">{{ forecast.name }}</h3></div></div><div class="row"><div class="col-xs-12"><p>Avalanche information for this region is available &nbsp;<a ng-href="{{forecast.parksUrl}}" target="_blank"><i class="fa fa-external-link">here.</i></a></p></div></div></div><div ng-hide="forecast.externalUrl || forecast.parksUrl" class="panel-body ac-forecast-mini-body"><div class="row"><div class="col-xs-6"><h4 class="ac-forecast-region">{{ forecast.bulletinTitle | acNormalizeForecastTitle }}</h4></div><div ng-if="forecast.region == &quot;kananaskis&quot;" class="col-xs-6"><a target="_blank" href="" class="pull-right"><img style="width:75px;" src="http://www.avalanche.ca/assets/images/kananaskis.jpg"/></a></div><div ng-if="!(forecast.region == &quot;kananaskis&quot;)" class="col-xs-6"><a target="_blank" href="{{sponsor.getText(&quot;sponsor.url&quot;)}}" class="pull-right"><img src="{{sponsor.getText(&quot;sponsor.image-229&quot;)}}"/></a></div></div><div class="row ac-forecast-dates"><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">DATE ISSUED</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.dateIssued | date:\'EEEE MMMM d, y h:mm a\'  | uppercase }}</span></dt></dl></div><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">VALID UNTIL</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.validUntil | date:\'EEEE MMMM d, y h:mm a\' | uppercase }}</span></dt></dl></div></div><div class="row"><div class="col-xs-12"><p class="ac-forecast-highlights"><strong ng-bind-html="forecast.highlights"></strong></p></div></div><div class="row"><div style="padding-right:0" class="col-xs-12 observation-tabs"><ul role="tablist" style="text-transform: uppercase;" class="nav nav-pills"><li class="active"><a href="" role="tab" data-target="#forecast" data-toggle="tab">Forecast</a></li><li><a href="" role="tab" data-target="#problems" data-toggle="tab">Problems</a></li><li><a href="" role="tab" data-target="#details" data-toggle="tab">Details</a></li><li><a href="/forecasts/{{forecast.region}}" role="tab">Full Page</a></li><li><a href="/weather" role="tab">Weather</a></li></ul><div class="tab-content"><div id="forecast" class="tab-pane active"><div class="row"><div class="col-xs-12"><div class="panel panel-primary"><div class="panel-heading">{{ forecast.dangerRatings[0].date | dateUtc:\'dddd\' }}</div><div class="panel-body ac-forecast-nowcast"><img ng-show="forecast.region" ng-src="{{forecast.region &amp;&amp; apiUrl+\'/api/forecasts/\' + forecast.region  + \'/nowcast.svg\' || \'\'}}" class="ac-nowcast"/></div><table class="table table-condensed ac-forecast-days"><thead class="ac-thead-dark"><tr><th></th><th>{{ forecast.dangerRatings[1].date | dateUtc:\'dddd\' }}</th><th>{{ forecast.dangerRatings[2].date | dateUtc:\'dddd\' }}</th></tr></thead><tbody><tr><td class="ac-veg-zone--alp"><strong>Alpine</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.alp.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.alp.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--tln"><strong>Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.tln.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.tln.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--btl"><strong>Below Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.btl.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.btl.replace(\':\', \' \') }}</strong></td></tr><tr><td><strong>Confidence:</strong></td><td colspan="2"><span class="ac-text-default">{{ forecast.confidence }}</span></td></tr></tbody></table><footer id="forecast-bulletin" class="col-xs-12"></footer><div class="panel-group"><div class="panel panel-default first"><h4 class="panel-title"><a href="" data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="collapsed">{{dangerRating.getText(\'generic.title\')}}</a></h4><div id="collapseTwo" class="collapse"><div ng-bind-html="dangerRating.getStructuredText(\'generic.body\').asHtml(ctx)" class="panel-body"></div></div></div><div class="panel panel-default last"><h4 class="panel-title"><a href="" data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="collapsed">{{disclaimer.getText(\'generic.title\')}}</a></h4><div id="collapseOne" class="collapse"><div ng-bind-html="disclaimer.getStructuredText(\'generic.body\').asHtml(ctx)" class="panel-body"></div></div></div></div></div></div></div></div><div id="problems" class="tab-pane"><div id="problemsAccordion" class="panel-group"><div ng-repeat="problem in forecast.problems" class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#problem{{$index}}" data-toggle="collapse" data-parent="#problemsAccordion">{{ problem.type }}<i class="fa fa-fw fa-level-down pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="problem{{$index}}" class="panel-collapse collapse"><div class="panel-body"><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Elevations?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--elevations"><img ng-src="{{problem.icons.elevations}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Aspects?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--aspects"><img ng-src="{{problem.icons.aspects}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Chances of Avalanches?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--likelihood"><img ng-src="{{problem.icons.likelihood}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Expected Size?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--expected-size"><img ng-src="{{problem.icons.expectedSize}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-12"><p ng-bind-html="problem.comment" class="ac-problem narative"></p><div class="panel panel-default ac-problem-travel-advice"><div class="panel-heading"><strong class="small">Travel and Terrain Advice</strong></div><div class="panel-body"><p ng-bind-html="problem.travelAndTerrainAdvice"></p></div></div></div></div></div></div></div></div></div><div id="details" class="tab-pane"><div id="detailsAccordion" class="panel-group"><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#avalancheSummary" data-toggle="collapse" data-parent="#detailsAccordion">Avalanche Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="avalancheSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.avalancheSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#snowpackSummary" data-toggle="collapse" data-parent="#detailsAccordion">Snowpack Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="snowpackSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.snowpackSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#weatherForecast" data-toggle="collapse" data-parent="#detailsAccordion">Weather Forecast<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="weatherForecast" class="panel-collapse collapse"><div ng-bind-html="forecast.weatherForecast" class="panel-body"></div></div></div></div></div></div></div></div></div></div>'),e.put("loading-indicator.html",'<div class="ac-loading-indicator"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),e.put("min-map-modal.html",'<div class="modal-body"><input type="button" value="Save and close" ng-click="save()" class="btn btn-default save-button"/><div ac-location-select="ac-location-select" latlng="params.latlng" style="height: 100%; width: 100%;" ng-if="show"></div></div>'),e.put("min-observation-drawer.html",'<div class="panel"><div class="panel-body"><div class="row"><div ng-click="closeDrawer()" class="pull-right close-drawer"><i class="fa fa-close"></i></div><div class="col-sm-8 col-xs-12"><h3>{{::sub.title}}</h3></div><div class="col-sm-3 col-xs-12"><a target="_blank" href="{{sponsor.getText(&quot;sponsor.url&quot;)}}" class="pull-right"><img src="{{sponsor.getText(&quot;sponsor.image-229&quot;)}}"/></a></div></div><div class="row submission-header"><div class="col-sm-12 section-label"><i class="fa fa-clock-o"></i><span>Submitted</span></div><div class="col-sm-12"><p>By <span> {{::sub.user}} </span></p><p>On {{::sub.dateFormatted}}</p></div></div></div><div style="padding-right: 0" class="panel-body"><div class="row-fluid observation-tabs"><ul role="tablist" class="nav nav-pills"><li ng-repeat="tab in reportTypes" role="presentation" ng-class="[hasReport(tab),{active: tab === sub.requested}]"><a ng-click="changeTab(tab)" style="text-transform: uppercase;">{{::tab}}</a></li></ul></div><div class="row-fluid"><div class="tab-content"><div ng-repeat="tab in reportTypes" role="tabpanel" id="{{tab}}" ng-class="{active: tab === sub.requested}" class="tab-pane"><div class="row-fluid section-label"><i class="fa fa-info-circle"></i><span>Information</span></div><div ng-repeat="ob in sub.obs"><div ng-if="ob.obtype === sub.requested" ng-repeat="item in activeTab" class="submission-header"><ul class="observation-information"><li ng-if="item.type === \'number\' || item.type === \'radio\'|| item.type === \'dropdown\'" class="observation-item">{{::item.prompt}}<i class="fa fa-check"></i><span class="value">{{::item.value}}</span></li><li ng-if="item.type === \'checkbox\'" class="observation-item">{{::item.prompt}}<ul><li ng-repeat="op in item.value track by $index"><i class="fa fa-check"></i><span class="value">{{op}}</span></li></ul></li><li ng-if="item.type === \'datetime\'" class="observation-item">{{::item.prompt}}<span>&nbsp; {{::item.value | dateformat}}</span></li></ul><div ng-if="item.type === \'textarea\'" class="observation-item comments"><div class="row-fluid section-label"><i class="fa fa-comment"></i><span>Comments</span></div><div class="row-fluid"><div class="col-sm-12">{{::item.value}}</div></div></div></div></div></div></div></div></div><div class="panel-body upload-n-share"><div ng-if="sub.uploads.length &gt; 0" class="row"><div class="col-sm-12 section-label"><i class="fa fa-camera"></i><span>Uploads (click/tap to enlarge)</span></div><div class="col-sm-12"><ul class="list-inline"><li ng-repeat="url in sub.thumbs"><a ng-href="{{::url}}" target="_blank"><img ng-src="{{::url}}" width="75" alt="{{::sub.title}}"/></a></li></ul></div></div><div class="row"><div class="col-sm-12 section-label"><i class="fa fa-share-square-o"></i><span>Share this report</span></div><div class="col-sm-12"><div class="col-sm-12"><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{::sub.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{::sub.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{::sub.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div></div></div></div>'),e.put("min-report-form.html",'<div class="min-form"><form name="acMinForm" ng-submit="submitForm()" novalidate="novalidate" ng-if="!report.subid" role="form" ac-submission-form-validator="ac-submission-form-validator"><div class="form-fields col-xs-12 no-padding"><div class="col-xs-12 col-md-4 form-left-column"><div class="required-info clearfix"><h2 class="form-subtitle">Step 1. Required Info</h2><div class="required-info-data col-xs-12"><div ng-class="{\'has-error\': !acMinForm.title.$valid &amp;&amp; acMinForm.title.$dirty }" class="form-group"><label for="title">Name your report</label><input type="text" name="title" ng-model="report.title" placeholder="e.g. Upper Raft River" required="required" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.datetime.$valid}" class="form-group"><label for="datetime"> Submission date and time</label><input type="datetime" name="datetime" ng-model="report.datetime" ac-datetime-picker="ac-datetime-picker" class="form-control"/></div><div ng-class="{\'has-error\': invalidLatLng}" class="form-group"><label for="latlng"> Enter location by map</label><div ng-click="openMapModal()" class="btn-map"><i class="fa fa-map-o"></i></div><label>or enter location by Lat Long</label><input type="text" ng-class="{\'modified\': tempLatlngModified}" name="tempLatlng" ac-enter="saveLocation()" ng-model="report.tempLatlng" placeholder="e.g. 51.522, -188.883" required="required" class="form-control latlng"/><div role="button" ng-if="tempLatlngModified" ng-click="saveLocation()" class="save-location"><i class="fa fa-map-marker"></i></div><div ng-if="invalidLatLng" class="error col-xs-12 no-padding">Invalid coordinates format</div></div></div></div><div class="uploads"><h2 class="form-subtitle">Step 2. Uploads</h2><p>Add a photo (.jpg or .png) to help tell your story.</p><div class="form-group"><div class="col-xs-12 no-padding btn-file"><div class="col-xs-3 no-padding"><span class="btn btn-default">Browse</span></div><input type="text" readonly="readonly" placeholder=".jpg or .png" value="{{ report.files.length ? report.files.length + \' photos added\' : null}}" class="col-xs-9 no-padding"/><input type="file" name="uploads" file-model="report.files" accept=".png,.jpg,.jpeg" multiple="multiple"/></div></div></div></div><div class="col-xs-12 col-md-8 form-right-column"><h2 id="top" class="form-subtitle">Step 3. Observations</h2><div class="announcement">Add information on one, some, or all tabs, then click SUBMIT at the bottom.</div><tabset type="pills" class="observation-tabs"><!--Quick report--><tab ac-tab-style="{{getTabExtraClasses(\'quickReport\')}}"><tab-heading class="tab-head">Quick</tab-heading><div class="tab-text">Use the Quick Report to quickly share information about your trip. You can create a comprehensive\nreport by adding more details in the Avalanche, Snowpack, Weather, and/or Incident tabs.</div><div class="fields-group"><div ng-repeat="(item, ridingCondition) in report.obs.quickReport.ridingConditions" class="field col-xs-12"><h4 class="field-title col-xs-12 no-padding"><strong>{{ ::ridingCondition.prompt }}</strong></h4><div class="options col-xs-12 col-md-4 col-md-push-8"></div><div class="options col-xs-12 col-md-8 col-md-pull-4"><div ng-if="ridingCondition.type==\'multiple\'" ng-repeat="(option, enabled) in ridingCondition.options" ng-class="{\'column-left\':$odd}" class="checkbox col-xs-12 col-md-6 inline"><label><input type="checkbox" name="{{ ::item}}" ng-model="ridingCondition.options[option]"/>{{ ::option}}</label></div><div ng-if="ridingCondition.type==\'single\'" ng-repeat="option in ridingCondition.options" class="radio col-xs-12 col-md-6 inline"><label><input type="radio" name="{{ ::item}}" ng-model="ridingCondition.selected" ng-value="option"/>{{ ::option}}</label></div></div></div><div class="field col-xs-12"><h4 class="field-title col-xs-12 no-padding"><strong>Avalanche conditions</strong></h4><div class="options col-xs-12 col-md-4 col-md-push-8"></div><div class="options col-xs-12 col-md-8 col-md-pull-4"><div class="checkbox col-xs-12"><label><input type="checkbox" name="slab" ng-model="report.obs.quickReport.avalancheConditions.slab"/>Slab avalanches today or yesterday.</label></div><div class="checkbox col-xs-12"><label><input type="checkbox" name="sound" ng-model="report.obs.quickReport.avalancheConditions.sound"/>Whumphing or drum-like sounds or shooting cracks.</label></div><div class="checkbox col-xs-12"><label><input type="checkbox" name="snow" ng-model="report.obs.quickReport.avalancheConditions.snow"/>30cm + of new snow, or significant drifitng, or rain in the last 48 hours.</label></div><div class="checkbox col-xs-12"><label><input type="checkbox" name="temp" ng-model="report.obs.quickReport.avalancheConditions.temp"/>Rapid temperature rise to near zero degrees or wet surface snow.</label></div></div></div><div class="field col-xs-12"><h4 class="field-title col-xs-12 no-padding"><strong>Comments</strong></h4><div class="options col-xs-12 col-md-4 col-md-push-8"></div><div class="options col-xs-12 col-md-8 col-md-pull-4"><div class="textarea col-xs-12"><textarea rows="3" name="comment" ng-model="report.obs.quickReport.comment" style="resize: vertical;" class="form-control"></textarea></div></div></div></div></tab><tab ng-repeat="(key, tab) in additionalFields" ac-tab-style="{{getTabExtraClasses(key)}}"><tab-heading class="tab-head">{{ ::tab.name}}</tab-heading><div ng-bind-html="tab.text" class="tab-text"></div><div class="fields-group"><div ng-repeat="(item, av) in report.obs[key].fields" class="field col-xs-12"><h4 class="field-title col-xs-12 no-padding"><strong>{{ ::av.prompt }}</strong></h4><div class="options col-xs-12 col-md-4 col-md-push-8"><div ng-if="av.helpText" class="help-text"><p><i class="fa fa-question-circle"></i><span>{{ ::av.helpText}}</span></p><span ng-if="av.guidelines"><a href="{{ ::av.guidelines}}" target="_blank">Submission guidelines</a></span></div></div><div class="options col-xs-12 col-md-8 col-md-pull-4"><div ng-if="av.type==\'checkbox\'" ng-repeat="(option, enabled) in av.options" ng-class="{\'inline\':av.inline, \'column-left\':$odd}" class="checkbox col-md-6 col-xs-12"><label><input type="checkbox" name="{{::item}}" ng-model="av.options[option]" ng-click="validate(item, av)"/>{{ ::option}}</label></div><div ng-if="av.type==\'radio\'" ng-repeat="option in av.options" ng-class="{\'inline\':av.inline, \'column-left\':$odd}" class="radio col-md-6 col-xs-12"><label><input type="radio" ng-model="report.obs[key].fields[item].value" value="{{ ::option}}"/>{{ ::option}}</label></div><div ng-if="av.type==\'number\'" ng-class="{\'inline\':av.inline}" class="number col-xs-12"><label><input type="number" name="{{::item}}" placeholder="Number between {{ ::av.options.min}} and {{ ::av.options.max}}" ng-model="report.obs[key].fields[item].value" ng-blur="validate(item, av)"/></label></div><div ng-if="av.type==\'dropdown\'" ng-class="{\'inline\':av.inline, \'column-left\':$odd}" class="select col-md-6 col-xs-12 no-padding"><select ng-options="option for option in av.options" ng-model="report.obs[key].fields[item].value"><option value="">Select option</option></select></div><div ng-if="av.type==\'textarea\'" class="textarea col-xs-12"><textarea rows="3" ng-model="report.obs[key].fields[item].value" class="form-control"></textarea></div><div ng-if="av.type==\'datetime\'" class="datetime-input col-xs-12"><label for="datetime"><input type="datetime" ng-model="report.obs[key].fields[item].value" ac-datetime-picker="ac-datetime-picker" placeholder="Click to select date"/></label></div><div ng-if="acMinForm[item].$invalid" class="error col-xs-12 no-padding">{{::av.errorMessage}}</div></div></div></div></tab></tabset><div class="return-to-top col-xs-12 no-padding"><input type="button" value="Back to top" ng-click="scrollToTop()" class="btn btn-default"/></div></div></div><input type="button" value="Back" ng-click="goBack()" class="btn btn-default"/><div class="submit-btn"><i ng-show="minsubmitting" class="fa fa-fw fa-lg fa-spinner fa-spin"></i><input type="submit" id="submit" value="SUBMIT" ng-disabled="acMinForm.$invalid || minsubmitting" class="btn btn-default"/></div></form><div ng-if="report.subid"><div role="alert" class="alert alert-success">Your report was successfully submited.</div><input type="button" value="Back" ng-click="goBack()" class="btn btn-default"/><div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{::report.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{::report.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{::report.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div><div ng-if="minerror"><div role="alert" class="alert alert-danger"><p>There was an error submittting you report.</p><p ng-if="minerrormsg">{{minerrormsg}}</p><div ng-if="validationErrors">Please checkout the following fields:<p ng-repeat="(tab, fields) in validationErrors"><span class="firstCapital">{{::tab}} - {{::fields}}</span></p></div></div></div></div>'),e.put("min-report-form2.html",'<div class="min-form"><form name="acMinForm" ng-submit="submitForm()" ng-show="!report.subid &amp;&amp; !minerror" role="form"><div ng-class="{\'has-error\': !acMinForm.title.$valid}" class="form-group"><label for="title"><i class="fa fa-newspaper-o"></i>Report title</label><input type="text" name="title" ng-model="report.title" required="required" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.datetime.$valid}" class="form-group"><label for="datetime"><i class="fa fa-clock-o"></i>Date and Time</label><input type="datetime" name="datetime" ng-model="report.datetime" ac-datetime-picker="ac-datetime-picker" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.latlng.$valid}" class="form-group"><label for="latlng"><i class="fa fa-map-marker"></i>Location</label><div ac-location-select="ac-location-select" latlng="report.latlng" style="height: 300px; width: 100%; margin: 10px 0;"></div><input type="text" name="latlng" ng-model="report.latlng" placeholder="Drop pin on map to set location" required="required" class="form-control"/></div><div class="form-group"><label for="uploads"><i class="fa fa-image"></i>Add photo<small style="font-weight: normal;"> .jpg or .png</small></label><input type="file" name="uploads" file-model="report.files" accept=".png,.jpg,.jpeg" multiple="multiple" class="form-control"/><div>{{ report.files.length }} photos added</div></div><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Avalanche Report</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, av) in report.obs.avalancheReport" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ av.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="av.type==\'checkbox\'" ng-repeat="(option, enabled) in av.options" class="checkbox">{{option}}<label><input type="checkbox" ng-model="report.avs[item].options[option]"/>{{option}}</label></div><div ng-if="av.type==\'single\'" ng-repeat="option in av.options" class="radio"><label><input type="radio" ng-model="report.avs[item].selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div></div><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Riding\nconditions</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, ridingCondition) in report.obs.quickReport.ridingConditions" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ ridingCondition.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="ridingCondition.type==\'multiple\'" ng-repeat="(option, enabled) in ridingCondition.options" class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.ridingConditions[item].options[option]"/>{{option}}</label></div><div ng-if="ridingCondition.type==\'single\'" ng-repeat="option in ridingCondition.options" class="radio"><label><input type="radio" ng-model="report.obs.quickReport.ridingConditions[item].selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title"><strong>Avalanche conditions</strong></h4></div><div class="panel-body"><div class="form-group"><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.slab"/>Slab\navalanches today or yesterday.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.sound"/>Whumphing or\ndrum-like sounds or shooting cracks.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.snow"/>30cm\n+ of new snow, or significant drifitng, or rain in the last 48 hours.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.temp"/>Rapid\ntemperature rise to near zero degrees or wet surface snow.</label></div></div></div></div></div><div class="form-group"><label>Comments</label><textarea rows="3" ng-model="report.comment" class="form-control"></textarea></div><input id="submit" type="submit" value="Submit" ng-disabled="minsubmitting" style="border-radius:0; background-color: rgb(0, 86, 183); color: white;" class="btn btn-default"/><i ng-show="minsubmitting" class="fa fa-fw fa-lg fa-spinner fa-spin"></i></form><div ng-show="report.subid"><div role="alert" class="alert alert-success">Your report was successfully submited.</div><div class="well"><h4>Share this report:</h4><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{report.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{report.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{report.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div><div ng-show="minerror"><div role="alert" class="alert alert-danger"><p>There was an error submittting you report.</p><p>{{minerrormsg}}</p></div></div></div>'),e.put("min-report-modal.html",'<div id="minForm" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button data-dismiss="modal" class="close"><span>close</span></button><h4 class="modal-title">Mountain Information Network Report</h4></div><div class="modal-body"><div ac-min-report-form="ac-min-report-form"></div></div></div></div></div>'),e.put("min-report-popup-modal.html",'<div id="mobileMapPopup" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"></div>                <a href="#" data-dismiss="modal" style="position: absolute; right: 10px; top: 10px;" class="pull-right"><i class="fa fa-close fa-lg"></i></a></div></div></div>'),e.put("social-share.html",'<div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a href="https://twitter.com/intent/tweet?url=http://avalanche.ca"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://avalanche.ca"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a href="https://plus.google.com/share?url=http://avalanche.ca"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div>')
}])}();